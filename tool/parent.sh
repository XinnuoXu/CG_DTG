#/bin/bash

################
#In-domain
################

#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/logs.base/test.res.9000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/logs.re.base/test.res.7000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/logs.re.encdec_partial_numerical/test.res.7000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/logs.re.encdec_partial/test.res.7000'

#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/logs.re.random/test.res.7000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/logs.re.discriministic/test.res.7000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/logs.nn/test.res.4000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/logs.re.nn.spectral/test.res.6000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/logs.re.nn.spectral_with_sample//test.res.6000'

################
#Out-of-domain
################

#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/logs.base/test_unseen.res.9000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/logs.re.base/test_unseen.res.7000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/logs.re.encdec_partial_numerical/test_unseen.res.7000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/logs.re.encdec_partial/test_unseen.res.7000'

#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/logs.re.random/test_unseen.res.7000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/logs.re.discriministic/test_unseen.res.7000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/logs.nn/test_unseen.res.4000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/logs.re.nn.spectral/test_unseen.res.6000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/logs.re.nn.spectral_with_sample/test_unseen.res.6000'


################
#1-triple-1-shot OOD
################

#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/oneshot.logs.base/test.res.250'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/oneshot.logs.re.base/test.res.100'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/oneshot.logs.re.encdec_partial_numerical/test.res.100'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/oneshot.logs.re.encdec_partial/test.res.100'

#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/oneshot.logs.re.random/test.res.100'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/oneshot.logs.re.discriministic/test.res.100'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/oneshot.logs.re.nn/test.res.100'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/oneshot.logs.re.nn.spectral/test.res.100'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/oneshot.logs.re.nn.spectral_with_sample/test.res.100'


################
#3-triple In-domain train In-domain test
################

#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short.logs.re.base/test.res.5000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short.logs.re.encdec_partial_numerical/test.res.5000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short.logs.re.encdec_partial/test.res.5000'

#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short.logs.re.random/test.res.5000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short.logs.re.discriministic/test.res.5000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short.logs.re.nn/test.res.4000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short.logs.re.nn.spectral/test.res.5000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short.logs.re.nn.spectral_with_sample/test.res.6000'

################
#3-triple In-domain train OOD test
################

#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short.logs.re.base/test_unseen.res.5000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short.logs.re.encdec_partial_numerical/test_unseen.res.5000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short.logs.re.encdec_partial/test_unseen.res.5000'

#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short.logs.re.random/test_unseen.res.5000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short.logs.re.discriministic/test_unseen.res.5000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short.logs.re.nn/test_unseen.res.4000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short.logs.re.nn.spectral/test_unseen.res.5000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short.logs.re.nn.spectral_with_sample//test_unseen.res.6000'

################
#3-triple single-shot In-domain train In-domain test
################

#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short_single.logs.re.base/test.res.2000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short_single.logs.re.encdec_partial_numerical/test.res.2000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short_single.logs.re.encdec_partial/test.res.2000'

#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short_single.logs.re.random/test.res.2000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short_single.logs.re.discriministic/test.res.2000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short_single.logs.re.nn/test.res.2000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short_single.logs.re.nn.spectral/test.res.5000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short_single.logs.re.nn.spectral_with_sample//test.res.4500'

################
#3-triple single-shot In-domain train OOD test
################

#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short_single.logs.re.base/test_unseen.res.2000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short_single.logs.re.encdec_partial_numerical/test_unseen.res.2000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short_single.logs.re.encdec_partial/test_unseen.res.2000'

#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short_single.logs.re.random/test_unseen.res.2000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short_single.logs.re.discriministic/test_unseen.res.2000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short_single.logs.re.nn/test_unseen.res.2000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short_single.logs.re.nn.spectral/test_unseen.res.5000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short_single.logs.re.nn.spectral_with_sample//test_unseen.res.4500'

################
#n-triple single-shot In-domain train In-domain test
################
# Partial encoder-decoder
# ntriple=2; test_from=1000
# ntriple=4; test_from=2000
# ntriple=5; test_from=3000
# ntriple=6; test_from=3000
# ntriple=7; test_from=3000
################

ntriple=$1
test_from=$2
base_path=/rds/user/hpcxu1/hpc-work/outputs.webnlg/${ntriple}triple.single/

#path_prefix=${base_path}/short_single.logs.re.encdec_partial/test.res.${test_from}
path_prefix=${base_path}/short_single.logs.re.random/test.res.${test_from}
#path_prefix=${base_path}/short_single.logs.re.discriministic/test.res.${test_from}
#path_prefix=${base_path}/short_single.logs.re.nn/test.res.${test_from}
#path_prefix=${base_path}/short_single.logs.re.nn.spectral/test.res.${test_from}
#path_prefix=${base_path}/short_single.logs.re.nn.spectral_with_sample/test.res.${test_from}

################
#n-triple single-shot In-domain train OOD test
################

#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short_single.logs.re.base/test_unseen.res.2000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short_single.logs.re.encdec_partial_numerical/test_unseen.res.2000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short_single.logs.re.encdec_partial/test_unseen.res.2000'

#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short_single.logs.re.random/test_unseen.res.2000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short_single.logs.re.discriministic/test_unseen.res.2000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short_single.logs.re.nn/test_unseen.res.2000'
#path_prefix='/rds/user/hpcxu1/hpc-work/outputs.webnlg/short_single.logs.re.nn.spectral/test_unseen.res.5000'

python ./tool/parent_data.py ${path_prefix}
python -m tool.PARENT.table_text_eval --references ${path_prefix}.parent_ref --generations ${path_prefix}.parent_pred --tables ${path_prefix}.parent_table --lambda_weight 0.5

